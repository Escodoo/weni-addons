<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2021 - TODAY, Marcel Savegnago <marcel.savegnago@escodoo.com.br>
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->

<odoo>

    <!--    Lead Form-->
    <record model="ir.ui.view" id="crm_lead_form_view_leads">
        <field name="name">crm.lead.form.leads (in weni_crm_custom)</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
        <field name="arch" type="xml">
            <button name="action_set_lost" position="replace">
                <button name="%(crm.crm_lead_lost_action)d"
                        string="Mark Lost"
                        type="action" class="oe_highlight"
                        context="{'default_lead_id': active_id}"
                        attrs="{'invisible': ['&amp;', ('probability', '=', 0), ('active', '=', False)]}"/>
            </button>
            <field name="tag_ids" position="after">
                <field name="lost_reason" attrs="{'invisible': [('active', '=', True)]}"/>
            </field>
            <field name="team_id" position="after">
                <field name="source_id"/>
            </field>
            <page name="extra" position="before">
<!--                <page name="weni_channel" string="Origin">-->
<!--                    <group name="weni_channel_details" string="Channels">-->
<!--                        <field name="weni_channel_ids" nolabel="1"/>-->
<!--                    </group>-->
<!--                </page>-->
                <page name="weni_icp_data" string="ICP Data">
                    <group name="weni_icp_details" string="ICP Details">
                        <field name="weni_company_size"/>
                        <field name="weni_average_selling_price"/>
                        <field name="weni_technological_maturity"/>
                        <field name="weni_has_dedicate_team"/>
                        <field name="weni_active_contacts"/>
                        <field name="weni_sale_type"/>
                        <field name="weni_icp_classification"/>
                    </group>
                </page>
                <page name="weni_diagnostic" string="Diagnostic">
                    <group name="weni_diagnostic_details" string="Diagnostic Details">
                        <field name="weni_project_budget"/>
                        <field name="weni_project_release_date"/>
                        <field name="weni_project_pain_primary"/>
                        <field name="weni_project_pain_secondary"/>
                        <field name="weni_project_integration"/>
                    </group>
                </page>
            </page>
        </field>
    </record>

    <!-- Opportunity Form -->
    <record model="ir.ui.view" id="crm_lead_form_view_oppor">
        <field name="name">crm.lead.form.oppor (in weni_crm_custom)</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
        <field name="arch" type="xml">
            <field name="team_id" position="after">
                <field name="source_id"/>
            </field>
            <page name="lead" position="before">
<!--                <page name="weni_channel" string="Origin">-->
<!--                    <group name="weni_channel_details" string="Channels">-->
<!--                        <field name="weni_channel_ids" nolabel="1"/>-->
<!--                    </group>-->
<!--                </page>-->
                <page name="weni_icp_data" string="ICP Data">
                    <group name="weni_icp_details" string="ICP Details">
                        <field name="weni_company_size"/>
                        <field name="weni_average_selling_price"/>
                        <field name="weni_technological_maturity"/>
                        <field name="weni_has_dedicate_team"/>
                        <field name="weni_active_contacts"/>
                        <field name="weni_sale_type"/>
                        <field name="weni_icp_classification"/>
                        <field name="amount_mrr"/>
                        <field name="amount_arr"/>
                        <field name="amount_nrr"/>
                    </group>
                </page>
                <page name="weni_diagnostic" string="Diagnostic">
                    <group name="weni_diagnostic_details" string="Diagnostic Details">
                        <field name="weni_project_budget"/>
                        <field name="weni_project_release_date"/>
                        <field name="weni_project_pain_primary"/>
                        <field name="weni_project_pain_secondary"/>
                        <field name="weni_project_integration"/>
                    </group>
                </page>
                <page name="weni_decision_makers" string="Decision Makers">
                    <group name="weni_decision_makers_details" string="Decision Makers">
                        <field name="weni_decision_maker_ids" nolabel="1"/>
                    </group>
                    <group name="weni_users_details" string="Users">
                        <field name="weni_user_ids" nolabel="1"/>
                    </group>
                </page>
            </page>
        </field>
    </record>

    <!-- Opportunity Form -->
    <record model="ir.ui.view" id="crm_lead_form_view">
        <field name="name">crm.lead.form.oppor (in weni_crm_custom)</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm_lead_saas.crm_lead_form_view"/>
        <field name="arch" type="xml">
            <page name="crm_saas_values" position="attributes">
                <attribute name="invisible">1</attribute>
            </page>
        </field>
    </record>

    <!-- Muda sequencia das visões disponiveis nos leads -->
    <record id="crm.crm_lead_all_leads_view_kanban" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
    </record>
    <record id="crm.crm_lead_all_leads_view_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
    </record>

    <!-- Adiciona agrupamento padrão por stage_id -->
    <record model="ir.ui.view" id="view_crm_lead_kanban">
        <field name="name">crm.lead.kanban (in weni_crm_custom)</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.view_crm_lead_kanban"/>
        <field name="arch" type="xml">
             <kanban position="attributes">
                <attribute name="default_group_by">stage_id</attribute>
             </kanban>
        </field>
    </record>

    <record model="ir.ui.view" id="view_crm_lead_case_kanban">
        <field name="name">crm.lead.case.kanban (in weni_crm_custom)</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_kanban_view_leads" />
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('o_kanban_record_bottom')]" position="before">
                <div>
                    <strong>
                        Company Size:
                    </strong>
                    <field name="weni_company_size"/>
                </div>
                <div>
                    <strong>
                        Active Contacts:
                    </strong>
                    <field name="weni_active_contacts"/>
                </div>
            </xpath>
        </field>
    </record>


</odoo>
